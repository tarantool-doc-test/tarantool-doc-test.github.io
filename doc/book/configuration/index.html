




<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>5. Configuration reference</title>
    <link rel="shortcut icon" href="/theme/favicon.ico" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.6.7-521-g0d75d50',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script type="text/javascript" src="../../_static/jquery.pin.min.js"></script>
    <script type="text/javascript" src="../../_static/headers.js"></script>
    <link rel="stylesheet" href="/theme/design.css">
    <link rel="stylesheet" href="/theme/pygmentize.css">
    <link rel="stylesheet" href="../../_static/sphinx_design.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
     
    <!--[if lt IE 9]>
      <script src="/js/ie8.js"></script>
      <link rel="stylesheet" href="/theme/ie8.css" />
    <![endif]-->
    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22120502-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Rating@Mail.ru counter -->
<script type="text/javascript">
  var _tmr = _tmr || [];
  _tmr.push({id: "2284916", type: "pageView", start: (new Date()).getTime()});
  (function (d, w) {
    var ts = d.createElement("script"); ts.type = "text/javascript"; ts.async = true;
    ts.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//top-fwz1.mail.ru/js/code.js";
    var f = function () {var s = d.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ts, s);};
    if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); }
  })(document, window);
</script>
<noscript>
  <div style="position:absolute;left:-10000px;">
    <img src="//top-fwz1.mail.ru/counter?id=2284916;js=na" style="border:0;"
         height="1" width="1" alt="Рейтинг@Mail.ru" />
  </div>
</noscript>
<!-- //Rating@Mail.ru counter -->


  </head>
  
  <body class="p-cols_design">
  
    <div class="b-wrapper">
      <!-- HEADER > -->
      <header class="b-header">
        <div class="b-header-wrapper">
          <nav class="b-header_menu">
            
  <ul class="b-menu">
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org" class="b-menu-item-url">Overview</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/doc/" class="b-menu-item-url p-active">Documentation</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/download.html" class="b-menu-item-url">Download</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/careers.html" class="b-menu-item-url">Careers</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
        
      </li>
    
  </ul>

          </nav>
        </div>
      </header>
      <!-- < HEADER -->

      <div class="b-content b-clearbox">
        
  
  <section class="b-lightgray_block b-documentation_top b-clearbox p-documentation_in">
  
    <div class="b-block-wrapper">
      <h2 class="b-section-title">5. Configuration reference</h2>
      
    </div>
  </section>
  <div class="b-cols_content b-clearbox">
    <div class="b-cols_content_left">
      
      
<form id="searchbox" role="search" class="search b-search" action="../../search.html" method="get">
  <input class="b-search-text" name="q" type="text"/ placeholder="Search the manual">
  <input class="b-search-but" type="submit" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>


      
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro.html">1. Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide_getting_started.html">2. Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../box/index.html">3. Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../replication/index.html">4. Replication</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">5. Configuration reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administration.html">6. Server administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connectors/index.html">7. Connectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app/a_errcodes.html">8. Appendix A. List of error codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app/b_proctitle.html">9. Appendix B. Process title</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app/c_lua_tutorial.html">10. Appendix C. Lua tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app/d_plugins.html">11. Appendix D. Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app/e_sophia/index.html">12. Appendix E. Sophia</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide/index.html">Contributing</a></li>
</ul>

    </div>
    <div class="b-cols_content_right">
      <div class="b-cols_content_right-slot">
  

<div class="b-page_header">
  <ul class="b-path-list">
    <li class="b-path-list-item">
      <a href="/doc/" class="b-path-list-item-url">Documentation</a>
    </li>
  
    <li class="b-path-list-item">
      <a href="../index.html" class="b-path-list-item-url">User Guide</a>
    </li>
  
    <li class="b-path-list-item"><span class="b-path_current">5. Configuration reference</span></li>
  </ul>
</div>

<article class="b-article">
          
          
  <div class="section" id="configuration-reference">
<span id="book-cfg"></span><h1>5. Configuration reference<a class="headerlink" href="#configuration-reference" title="Ссылка на этот заголовок">¶</a></h1>
<p>This chapter provides a reference of options which can be set on the command
line or in an initialization file.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#command-options" id="id4">Command options</a></li>
<li><a class="reference internal" href="#uri" id="id5">URI</a></li>
<li><a class="reference internal" href="#initialization-file" id="id6">Initialization file</a></li>
<li><a class="reference internal" href="#configuration-parameters" id="id7">Configuration parameters</a><ul>
<li><a class="reference internal" href="#basic-parameters" id="id8">Basic parameters</a></li>
<li><a class="reference internal" href="#configuring-the-storage" id="id9">Configuring the storage</a></li>
<li><a class="reference internal" href="#book-cfg-snapshot-daemon" id="id10">Snapshot daemon</a></li>
<li><a class="reference internal" href="#binary-logging-and-snapshots" id="id11">Binary logging and snapshots</a></li>
<li><a class="reference internal" href="#replication" id="id12">Replication</a></li>
<li><a class="reference internal" href="#networking" id="id13">Networking</a></li>
<li><a class="reference internal" href="#logging" id="id14">Logging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#book-cfg-local-hot-standy" id="id15">Local hot standby</a></li>
</ul>
</div>
<p>Tarantool is started by entering the command:</p>
<pre class="highlight literal-block">
$ <strong>tarantool</strong>
# OR
$ <strong>tarantool</strong> <em>options</em>
# OR
$ <strong>tarantool</strong> <em>lua-initialization-file</em> <strong>[</strong> <em>arguments</em> <strong>]</strong>
</pre>
<div class="section" id="command-options">
<h2><a class="toc-backref" href="#id4">5.1. Command options</a><a class="headerlink" href="#command-options" title="Ссылка на этот заголовок">¶</a></h2>
<dl class="option">
<dt id="cmdoption-h">
<span id="cmdoption--help"></span><code class="descname">-h</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--help</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-h" title="Ссылка на это определение">¶</a></dt>
<dd><p>Print an annotated list of all available options and exit.</p>
</dd></dl>

<span class="target" id="tarantool-version"></span><dl class="option">
<dt id="cmdoption-V">
<span id="cmdoption--version"></span><code class="descname">-V</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--version</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-V" title="Ссылка на это определение">¶</a></dt>
<dd><p>Print product name and version, for example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ./tarantool --version
<span class="go">Tarantool 1.6.3-439-g7e1011b</span>
<span class="go">Target: Linux-x86_64-Debug</span>
<span class="go">...</span>
</pre></div>
</div>
<p>In this example:</p>
<p>“Tarantool” is the name of the reusable asynchronous networking
programming framework.</p>
<p>The 3-number version follows the standard <code class="docutils literal"><span class="pre">&lt;major&gt;-&lt;minor&gt;-&lt;patch&gt;</span></code>
scheme, in which <code class="docutils literal"><span class="pre">&lt;major&gt;</span></code> number is changed only rarely, <code class="docutils literal"><span class="pre">&lt;minor&gt;</span></code> is
incremented for each new milestone and indicates possible incompatible
changes, and <code class="docutils literal"><span class="pre">&lt;patch&gt;</span></code> stands for the number of bug fix releases made after
the start of the milestone. For non-released versions only, there may be a
commit number and commit SHA1 to indicate how much this particular build has
diverged from the last release.</p>
<p>“Target” is the platform tarantool was built on. Some platform-specific details
may follow this line.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Tarantool uses <a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-describe.html">git describe</a> to produce its version id, and this id
can be used at any time to check out the corresponding source from our
<a class="reference external" href="http://github.com/tarantool/tarantool.git">git repository</a>.</p>
</div>
</dd></dl>

</div>
<div class="section" id="uri">
<span id="id1"></span><h2><a class="toc-backref" href="#id5">5.2. URI</a><a class="headerlink" href="#uri" title="Ссылка на этот заголовок">¶</a></h2>
<p>Some configuration parameters and some functions depend on a URI, or
&quot;Universal Resource Identifier&quot;. The URI string format is similar to the
<a class="reference external" href="http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax">generic syntax for a URI schema</a>. So it may contain (in order) a user name
for login, a password, a host name or host IP address, and a port number. Only
the port number is always mandatory. The password is mandatory if the user
name is specified, unless the user name is 'guest'. So, formally, the URI
syntax is <code class="docutils literal"><span class="pre">[host:]port</span></code> or <code class="docutils literal"><span class="pre">[username:password&#64;]host:port</span></code>.
If host is omitted, then 'localhost' is assumed.
If username:password is omitted, then 'guest' is assumed. Some examples:</p>
<blockquote>
<div><div class="table container">
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URI fragment</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>port</td>
<td>3301</td>
</tr>
<tr class="row-odd"><td>host:port</td>
<td>127.0.0.1:3301</td>
</tr>
<tr class="row-even"><td>username:password&#64;host:port</td>
<td>notguest:sesame&#64;mail.ru:3301</td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>In certain circumstances a Unix domain socket may be used
where a URI is expected, for example &quot;unix/:/tmp/unix_domain_socket.sock&quot; or
simply &quot;/tmp/unix_domain_socket.sock&quot;.</p>
</div>
<div class="section" id="initialization-file">
<span id="init-label"></span><h2><a class="toc-backref" href="#id6">5.3. Initialization file</a><a class="headerlink" href="#initialization-file" title="Ссылка на этот заголовок">¶</a></h2>
<p>If the command to start Tarantool includes <span class="ccodei">lua-initialization-file</span>, then
Tarantool begins by invoking the Lua program in the file, which by convention
may have the name &quot;<code class="docutils literal"><span class="pre">script.lua</span></code>&quot;. The Lua program may get further arguments
from the command line or may use operating-system functions, such as <code class="docutils literal"><span class="pre">getenv()</span></code>.
The Lua program almost always begins by invoking <code class="docutils literal"><span class="pre">box.cfg()</span></code>, if the database
server will be used or if ports need to be opened. For example, suppose
<code class="docutils literal"><span class="pre">script.lua</span></code> contains the lines</p>
<div class="highlight-lua"><div class="highlight"><pre><span class="cp">#!/usr/bin/env tarantool</span>
<span class="n">box</span><span class="p">.</span><span class="n">cfg</span><span class="p">{</span>
    <span class="n">listen</span>              <span class="o">=</span> <span class="nb">os.getenv</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">LISTEN_URI&quot;</span><span class="p">),</span>
    <span class="n">slab_alloc_arena</span>    <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">pid_file</span>            <span class="o">=</span> <span class="s2">&quot;</span><span class="s">tarantool.pid&quot;</span><span class="p">,</span>
    <span class="n">rows_per_wal</span>        <span class="o">=</span> <span class="mi">50</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">Starting &#39;</span><span class="p">,</span> <span class="n">arg</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>and suppose the environment variable LISTEN_URI contains 3301,
and suppose the command line is <code class="docutils literal"><span class="pre">~/tarantool/src/tarantool</span> <span class="pre">script.lua</span> <span class="pre">ARG</span></code>.
Then the screen might look like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">export </span><span class="nv">LISTEN_URI</span><span class="o">=</span>3301
<span class="gp">$</span> ~/tarantool/src/tarantool script.lua ARG
<span class="go">... main/101/script.lua C&gt; version 1.6.3-439-g7e1011b</span>
<span class="go">... main/101/script.lua C&gt; log level 5</span>
<span class="go">... main/101/script.lua I&gt; mapping 107374184 bytes for a shared arena...</span>
<span class="go">... main/101/script.lua I&gt; recovery start</span>
<span class="go">... main/101/script.lua I&gt; recovering from &#39;./00000000000000000000.snap&#39;</span>
<span class="go">... main/101/script.lua I&gt; primary: bound to 0.0.0.0:3301</span>
<span class="go">... main/102/leave_local_hot_standby I&gt; ready to accept requests</span>
<span class="go">Starting  ARG</span>
<span class="go">... main C&gt; entering the event loop</span>
</pre></div>
</div>
<p>If one wishes to start an interactive session on the same terminal after
initialization is complete, one can use <a class="reference internal" href="../../reference/console.html#lua-function.console.start" title="console.start"><code class="xref lua lua-func docutils literal"><span class="pre">console.start()</span></code></a>.</p>
</div>
<div class="section" id="configuration-parameters">
<span id="snapshot-daemon"></span><span id="wal-mode"></span><span id="wal-dir"></span><span id="snap-dir"></span><span id="admin-port"></span><span id="replication-source"></span><span id="slab-alloc-arena"></span><span id="replication-port"></span><span id="local-hot-standby"></span><h2><a class="toc-backref" href="#id7">5.4. Configuration parameters</a><a class="headerlink" href="#configuration-parameters" title="Ссылка на этот заголовок">¶</a></h2>
<p>Configuration parameters have the form:</p>
<pre class="highlight literal-block">
box.cfg{ <em>key = value</em> [, <em>key = value</em> ...]]
</pre>
<p>Since <code class="docutils literal"><span class="pre">box.cfg</span></code> may contain many configuration parameters and since some of the
parameters (such as directory addresses) are semi-permanent, it's best to keep
<code class="docutils literal"><span class="pre">box.cfg</span></code> in a Lua file. Typically this Lua file is the initialization file
which is specified on the tarantool command line.</p>
<p>Most configuration parameters are for allocating resources, opening ports, and
specifying database behavior. All parameters are optional. A few parameters are
dynamic, that is, they can be changed at runtime by calling <code class="docutils literal"><span class="pre">box.cfg{}</span></code>
a second time.</p>
<p>To see all the non-null parameters, say <code class="docutils literal"><span class="pre">box.cfg</span></code> (no parentheses). To see a
particular parameter, for example the listen address, say <code class="docutils literal"><span class="pre">box.cfg.listen</span></code>.</p>
<p>The following sections describe all parameters for basic operation, for storage,
for binary logging and snapshots, for replication, for networking, and for logging.</p>
<div class="section" id="basic-parameters">
<h3><a class="toc-backref" href="#id8">5.4.1. Basic parameters</a><a class="headerlink" href="#basic-parameters" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><a class="reference internal" href="#confval-username"><code class="xref std std-confval docutils literal"><span class="pre">username</span></code></a>, <br />
<a class="reference internal" href="#confval-work_dir"><code class="xref std std-confval docutils literal"><span class="pre">work_dir</span></code></a>, <br />
<a class="reference internal" href="#confval-wal_dir"><code class="xref std std-confval docutils literal"><span class="pre">wal_dir</span></code></a>, <br />
<a class="reference internal" href="#confval-snap_dir"><code class="xref std std-confval docutils literal"><span class="pre">snap_dir</span></code></a>, <br />
<a class="reference internal" href="#confval-sophia_dir"><code class="xref std std-confval docutils literal"><span class="pre">sophia_dir</span></code></a>, <br />
<a class="reference internal" href="#confval-coredump"><code class="xref std std-confval docutils literal"><span class="pre">coredump</span></code></a>, <br />
<a class="reference internal" href="#confval-listen"><code class="xref std std-confval docutils literal"><span class="pre">listen</span></code></a>, <br />
<a class="reference internal" href="#confval-coredump"><code class="xref std std-confval docutils literal"><span class="pre">coredump</span></code></a>, <br />
<a class="reference internal" href="#confval-pid_file"><code class="xref std std-confval docutils literal"><span class="pre">pid_file</span></code></a>, <br />
<a class="reference internal" href="#confval-custom_proc_title"><code class="xref std std-confval docutils literal"><span class="pre">custom_proc_title</span></code></a>, <br />
<a class="reference internal" href="#confval-background"><code class="xref std std-confval docutils literal"><span class="pre">background</span></code></a> <br /></div></blockquote>
<dl class="confval">
<dt id="confval-username">
<code class="descname">username</code><a class="headerlink" href="#confval-username" title="Ссылка на это определение">¶</a></dt>
<dd><p>UNIX user name to switch to after start.</p>
<p>Type: string <br />
Default: null <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-work_dir">
<code class="descname">work_dir</code><a class="headerlink" href="#confval-work_dir" title="Ссылка на это определение">¶</a></dt>
<dd><p>A directory where database working files will be stored. The server
switches to work_dir with <em class="manpage">chdir(2)</em> after start. Can be
relative to the current directory. If not specified, defaults to
the current directory.</p>
<p>Type: string <br />
Default: null <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-wal_dir">
<code class="descname">wal_dir</code><a class="headerlink" href="#confval-wal_dir" title="Ссылка на это определение">¶</a></dt>
<dd><p>A directory where write-ahead log (.xlog) files are stored. Can be
relative to work_dir. Most commonly used so that snapshot files and
write-ahead log files can be stored on separate disks. If not
specified, defaults to work_dir.</p>
<p>Type: string <br />
Default: &quot;.&quot; <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-snap_dir">
<code class="descname">snap_dir</code><a class="headerlink" href="#confval-snap_dir" title="Ссылка на это определение">¶</a></dt>
<dd><p>A directory where snapshot (.snap) files will be stored. Can be relative to
work_dir. If not specified, defaults to work_dir. See also <a class="reference internal" href="#confval-wal_dir"><code class="xref std std-confval docutils literal"><span class="pre">wal_dir</span></code></a>.</p>
<p>Type: string <br />
Default: &quot;.&quot; <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-sophia_dir">
<code class="descname">sophia_dir</code><a class="headerlink" href="#confval-sophia_dir" title="Ссылка на это определение">¶</a></dt>
<dd><p>A directory where sophia files will be stored. Can be relative to
<a class="reference internal" href="#confval-work_dir"><code class="xref std std-confval docutils literal"><span class="pre">work_dir</span></code></a>. If not specified, defaults to <code class="file docutils literal"><span class="pre">work_dir</span></code>.</p>
<p>Type: string <br />
Default: &quot;sophia&quot; <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-coredump">
<code class="descname">coredump</code><a class="headerlink" href="#confval-coredump" title="Ссылка на это определение">¶</a></dt>
<dd><p>Deprecated. Do not use.</p>
<p>Type: boolean <br />
Default: false <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-listen">
<code class="descname">listen</code><a class="headerlink" href="#confval-listen" title="Ссылка на это определение">¶</a></dt>
<dd><p>The read/write data port number or <a class="reference internal" href="#uri"><span>URI</span></a> (Universal Resource Identifier)
string. Has no default value, so <strong>must be specified</strong> if connections will
occur from remote clients that do not use “admin address” (the
administrative host and port).</p>
<p>A typical value is 3301. The listen parameter may also be set for
<a class="reference internal" href="#book-cfg-local-hot-standy"><span>local hot standby</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">A replica also binds to this port, and accepts connections, but these
connections can only serve reads until the replica becomes a master.</p>
</div>
<p>Type: integer or string <br />
Default: null <br />
Dynamic: yes <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-pid_file">
<code class="descname">pid_file</code><a class="headerlink" href="#confval-pid_file" title="Ссылка на это определение">¶</a></dt>
<dd><p>Store the process id in this file. Can be relative to <a class="reference internal" href="#confval-work_dir"><code class="xref std std-confval docutils literal"><span class="pre">work_dir</span></code></a>.
A typical value is “<code class="file docutils literal"><span class="pre">tarantool.pid</span></code>”.</p>
<p>Type: string <br />
Default: null <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-custom_proc_title">
<code class="descname">custom_proc_title</code><a class="headerlink" href="#confval-custom_proc_title" title="Ссылка на это определение">¶</a></dt>
<dd><p>Add the given string to the server's <a class="reference internal" href="../app/b_proctitle.html#book-proctitle"><span>Process title</span></a>
(what’s shown in the COMMAND column for <code class="samp docutils literal"><span class="pre">ps</span> <span class="pre">-ef</span></code> and <code class="samp docutils literal"><span class="pre">top</span> <span class="pre">-c</span></code> commands).</p>
<p>For example, ordinarily <code class="samp docutils literal"><span class="pre">ps</span></code> shows the Tarantool server process thus:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ps -ef <span class="p">|</span> grep tarantool
<span class="go">1000     14939 14188  1 10:53 pts/2    00:00:13 tarantool &lt;running&gt;</span>
</pre></div>
</div>
<p>But if the configuration parameters include
<code class="docutils literal"><span class="pre">custom_proc_title='sessions'</span></code> then the output looks like:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ps -ef <span class="p">|</span> grep tarantool
<span class="go">1000     14939 14188  1 10:53 pts/2    00:00:16 tarantool &lt;running&gt;: sessions</span>
</pre></div>
</div>
<p>Type: string <br />
Default: null <br />
Dynamic: yes <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-background">
<code class="descname">background</code><a class="headerlink" href="#confval-background" title="Ссылка на это определение">¶</a></dt>
<dd><p>Run the server as a background task. The <a class="reference internal" href="#log-label"><span>logger</span></a> and
<a class="reference internal" href="#confval-pid_file"><code class="xref std std-confval docutils literal"><span class="pre">pid_file</span></code></a> parameters must be non-null for this to work.</p>
<p>Type: boolean <br />
Default: false <br />
Dynamic: no <br /></p>
</dd></dl>

</div>
<div class="section" id="configuring-the-storage">
<h3><a class="toc-backref" href="#id9">5.4.2. Configuring the storage</a><a class="headerlink" href="#configuring-the-storage" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><a class="reference internal" href="#confval-slab_alloc_arena"><code class="xref std std-confval docutils literal"><span class="pre">slab_alloc_arena</span></code></a>, <br />
<a class="reference internal" href="#confval-slab_alloc_minimal"><code class="xref std std-confval docutils literal"><span class="pre">slab_alloc_minimal</span></code></a>, <br />
<a class="reference internal" href="#confval-slab_alloc_maximal"><code class="xref std std-confval docutils literal"><span class="pre">slab_alloc_maximal</span></code></a>, <br />
<a class="reference internal" href="#confval-slab_alloc_factor"><code class="xref std std-confval docutils literal"><span class="pre">slab_alloc_factor</span></code></a>, <br />
<a class="reference internal" href="#confval-sophia"><code class="xref std std-confval docutils literal"><span class="pre">sophia</span></code></a> <br /></div></blockquote>
<dl class="confval">
<dt id="confval-slab_alloc_arena">
<code class="descname">slab_alloc_arena</code><a class="headerlink" href="#confval-slab_alloc_arena" title="Ссылка на это определение">¶</a></dt>
<dd><p>How much memory Tarantool allocates to actually store tuples, in gigabytes.
When the limit is reached, INSERT or UPDATE requests begin failing with
error <a class="reference internal" href="../app/a_errcodes.html#errcode-ER_MEMORY_ISSUE"><code class="xref std std-errcode docutils literal"><span class="pre">ER_MEMORY_ISSUE</span></code></a>. While the server does not go beyond the defined
limit to allocate tuples, there is additional memory used to store indexes
and connection information. Depending on actual configuration and workload,
Tarantool can consume up to 20% more than the limit set here.</p>
<p>Type: float <br />
Default: 1.0 <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-slab_alloc_minimal">
<code class="descname">slab_alloc_minimal</code><a class="headerlink" href="#confval-slab_alloc_minimal" title="Ссылка на это определение">¶</a></dt>
<dd><p>Size of the smallest allocation unit. It can be tuned down if most
of the tuples are very small</p>
<p>Type: integer <br />
Default: 64 <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-slab_alloc_maximal">
<code class="descname">slab_alloc_maximal</code><a class="headerlink" href="#confval-slab_alloc_maximal" title="Ссылка на это определение">¶</a></dt>
<dd><p>Size of the largest allocation unit. It can be tuned up if it
is necessary to store large tuples.</p>
<p>Type: integer <br />
Default: 1048576 <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-slab_alloc_factor">
<code class="descname">slab_alloc_factor</code><a class="headerlink" href="#confval-slab_alloc_factor" title="Ссылка на это определение">¶</a></dt>
<dd><p>Use slab_alloc_factor as the multiplier for computing the sizes of memory
chunks that tuples are stored in. A lower value may result in less wasted
memory depending on the total amount of memory available and the
distribution of item sizes.</p>
<p>Type: float <br />
Default: 1.1 <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-sophia">
<code class="descname">sophia</code><a class="headerlink" href="#confval-sophia" title="Ссылка на это определение">¶</a></dt>
<dd><p>The default sophia configuration can be changed with</p>
<pre class="highlight literal-block">
sophia = {
  page_size = <em>number</em>,
  threads = <em>number</em>,
  node_size = <em>number</em>,
  memory_limit = <em>number</em>,
}`
</pre>
<p>This method may change in the future.</p>
<p>Type: table <br />
Default: (see above) <br />
Dynamic: no <br /></p>
</dd></dl>

</div>
<div class="section" id="book-cfg-snapshot-daemon">
<span id="id2"></span><h3><a class="toc-backref" href="#id10">5.4.3. Snapshot daemon</a><a class="headerlink" href="#book-cfg-snapshot-daemon" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><a class="reference internal" href="#confval-snapshot_period"><code class="xref std std-confval docutils literal"><span class="pre">snapshot_period</span></code></a>, <br />
<a class="reference internal" href="#confval-snapshot_count"><code class="xref std std-confval docutils literal"><span class="pre">snapshot_count</span></code></a> <br /></div></blockquote>
<dl class="confval">
<dt id="confval-snapshot_period">
<code class="descname">snapshot_period</code><a class="headerlink" href="#confval-snapshot_period" title="Ссылка на это определение">¶</a></dt>
<dd><p>The interval between actions by the snapshot daemon, in seconds.
The snapshot daemon is a fiber which is constantly running.
If <code class="docutils literal"><span class="pre">snapshot_period</span></code> is set to a value greater than zero,
then the snapshot daemon will call <a class="reference internal" href="../box/admin.html#lua-function.box.snapshot" title="box.snapshot"><code class="xref lua lua-func docutils literal"><span class="pre">box.snapshot()</span></code></a> every
<code class="docutils literal"><span class="pre">snapshot_period</span></code> seconds, creating a new snapshot file each time.</p>
<p>For example: <code class="docutils literal"><span class="pre">box.cfg{snapshot_period=3600}</span></code>
will cause the snapshot daemon to create a new database snapshot
once per hour.</p>
<p>Type: integer <br />
Default: 0 <br />
Dynamic: yes <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-snapshot_count">
<code class="descname">snapshot_count</code><a class="headerlink" href="#confval-snapshot_count" title="Ссылка на это определение">¶</a></dt>
<dd><p>The maximum number of snapshots that the snapshot daemon maintains.
For example:</p>
<div class="highlight-lua"><div class="highlight"><pre><span class="n">box</span><span class="p">.</span><span class="n">cfg</span><span class="p">{</span>
    <span class="n">snapshot_period</span> <span class="o">=</span> <span class="mi">3600</span>
    <span class="n">snapshot_count</span>  <span class="o">=</span> <span class="mi">10</span>
<span class="p">}</span>
</pre></div>
</div>
<p>will cause the snapshot daemon to create a new snapshot each hour until
it has created ten snapshots. After that, it will remove the oldest
snapshot (and any associated write-ahead-log files) after creating a new one.
If snapshot_count equals zero, then the snapshot daemon does not remove
old snapshots.</p>
<p>Type: integer <br />
Default: 6 <br />
Dynamic: yes <br /></p>
</dd></dl>

</div>
<div class="section" id="binary-logging-and-snapshots">
<h3><a class="toc-backref" href="#id11">5.4.4. Binary logging and snapshots</a><a class="headerlink" href="#binary-logging-and-snapshots" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><a class="reference internal" href="#confval-panic_on_snap_error"><code class="xref std std-confval docutils literal"><span class="pre">panic_on_snap_error</span></code></a>, <br />
<a class="reference internal" href="#confval-panic_on_wal_error"><code class="xref std std-confval docutils literal"><span class="pre">panic_on_wal_error</span></code></a>, <br />
<a class="reference internal" href="#confval-rows_per_wal"><code class="xref std std-confval docutils literal"><span class="pre">rows_per_wal</span></code></a>, <br />
<a class="reference internal" href="#confval-snap_io_rate_limit"><code class="xref std std-confval docutils literal"><span class="pre">snap_io_rate_limit</span></code></a>, <br />
<a class="reference internal" href="#confval-wal_mode"><code class="xref std std-confval docutils literal"><span class="pre">wal_mode</span></code></a>, <br />
<a class="reference internal" href="#confval-wal_dir_rescan_delay"><code class="xref std std-confval docutils literal"><span class="pre">wal_dir_rescan_delay</span></code></a> <br /></div></blockquote>
<dl class="confval">
<dt id="confval-panic_on_snap_error">
<code class="descname">panic_on_snap_error</code><a class="headerlink" href="#confval-panic_on_snap_error" title="Ссылка на это определение">¶</a></dt>
<dd><p>If there is an error while reading the snapshot file
(at server start), abort.</p>
<p>Type: boolean <br />
Default: true <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-panic_on_wal_error">
<code class="descname">panic_on_wal_error</code><a class="headerlink" href="#confval-panic_on_wal_error" title="Ссылка на это определение">¶</a></dt>
<dd><p>If there is an error while reading a write-ahead log
file (at server start or to relay to a replica), abort.</p>
<p>Type: boolean <br />
Default: true <br />
Dynamic: yes <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-rows_per_wal">
<code class="descname">rows_per_wal</code><a class="headerlink" href="#confval-rows_per_wal" title="Ссылка на это определение">¶</a></dt>
<dd><p>How many log records to store in a single write-ahead log file.
When this limit is reached, Tarantool creates another WAL file
named <code class="samp docutils literal"><em><span class="pre">&lt;first-lsn-in-wal&gt;</span></em><span class="pre">.xlog</span></code>. This can be useful for
simple rsync-based backups.</p>
<p>Type: integer <br />
Default: 500000 <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-snap_io_rate_limit">
<code class="descname">snap_io_rate_limit</code><a class="headerlink" href="#confval-snap_io_rate_limit" title="Ссылка на это определение">¶</a></dt>
<dd><p>Reduce the throttling effect of <a class="reference internal" href="../box/admin.html#lua-function.box.snapshot" title="box.snapshot"><code class="xref lua lua-func docutils literal"><span class="pre">box.snapshot()</span></code></a> on
INSERT/UPDATE/DELETE performance by setting a limit on how many
megabytes per second it can write to disk. The same can be
achieved by splitting <a class="reference internal" href="#confval-wal_dir"><code class="xref std std-confval docutils literal"><span class="pre">wal_dir</span></code></a> and <a class="reference internal" href="#confval-snap_dir"><code class="xref std std-confval docutils literal"><span class="pre">snap_dir</span></code></a>
locations and moving snapshots to a separate disk.</p>
<p>Type: float <br />
Default: null <br />
Dynamic: <strong>yes</strong> <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-wal_mode">
<code class="descname">wal_mode</code><a class="headerlink" href="#confval-wal_mode" title="Ссылка на это определение">¶</a></dt>
<dd><p>Specify fiber-WAL-disk synchronization mode as:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">none</span></code>: write-ahead log is not maintained;</li>
<li><code class="docutils literal"><span class="pre">write</span></code>: fibers wait for their data to be written to
the write-ahead log (no <em class="manpage">fsync(2)</em>);</li>
<li><code class="docutils literal"><span class="pre">fsync</span></code>: fibers wait for their data, <em class="manpage">fsync(2)</em>
follows each <em class="manpage">write(2)</em>;</li>
</ul>
<p>Type: string <br />
Default: &quot;write&quot; <br />
Dynamic: <strong>yes</strong> <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-wal_dir_rescan_delay">
<code class="descname">wal_dir_rescan_delay</code><a class="headerlink" href="#confval-wal_dir_rescan_delay" title="Ссылка на это определение">¶</a></dt>
<dd><p>Number of seconds between periodic scans of the write-ahead-log
file directory, when checking for changes to write-ahead-log
files for the sake of replication or local hot standby.</p>
<p>Type: float <br />
Default: 2 <br />
Dynamic: no <br /></p>
</dd></dl>

</div>
<div class="section" id="replication">
<h3><a class="toc-backref" href="#id12">5.4.5. Replication</a><a class="headerlink" href="#replication" title="Ссылка на этот заголовок">¶</a></h3>
<dl class="confval">
<dt id="confval-replication_source">
<code class="descname">replication_source</code><a class="headerlink" href="#confval-replication_source" title="Ссылка на это определение">¶</a></dt>
<dd><p>If replication_source is not an empty string, the server is considered
to be a Tarantool replica. The replica server will try to connect to the
master which replication_source specifies with a <a class="reference internal" href="#uri"><span>URI</span></a> (Universal
Resource Identifier), for example <code class="samp docutils literal"><em><span class="pre">konstantin</span></em><span class="pre">:</span><em><span class="pre">secret_password</span></em><span class="pre">&#64;</span><em><span class="pre">tarantool.org</span></em><span class="pre">:</span><em><span class="pre">3301</span></em></code>.</p>
<p>The default user name is ‘guest’.
A replica server does not accept data-change requests on the <a class="reference internal" href="#confval-listen"><code class="xref std std-confval docutils literal"><span class="pre">listen</span></code></a> port.
The replication_source parameter is
dynamic, that is, to enter master mode, simply set replication_source
to an empty string and issue <code class="code docutils literal"><span class="pre">box.cfg{replication_source=</span></code><code class="samp docutils literal"><em><span class="pre">new-value</span></em></code><code class="code docutils literal"><span class="pre">}</span></code>.</p>
<p>Type: string <br />
Default: null <br />
Dynamic: <strong>yes</strong> <br /></p>
</dd></dl>

</div>
<div class="section" id="networking">
<h3><a class="toc-backref" href="#id13">5.4.6. Networking</a><a class="headerlink" href="#networking" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><a class="reference internal" href="#confval-io_collect_interval"><code class="xref std std-confval docutils literal"><span class="pre">io_collect_interval</span></code></a>, <br />
<a class="reference internal" href="#confval-readahead"><code class="xref std std-confval docutils literal"><span class="pre">readahead</span></code></a>  <br /></div></blockquote>
<dl class="confval">
<dt id="confval-io_collect_interval">
<code class="descname">io_collect_interval</code><a class="headerlink" href="#confval-io_collect_interval" title="Ссылка на это определение">¶</a></dt>
<dd><p>The server will sleep for io_collect_interval seconds between iterations
of the event loop. Can be used to reduce CPU load in deployments in which
the number of client connections is large, but requests are not so frequent
(for example, each connection issues just a handful of requests per second).</p>
<p>Type: float <br />
Default: null <br />
Dynamic: <strong>yes</strong> <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-readahead">
<code class="descname">readahead</code><a class="headerlink" href="#confval-readahead" title="Ссылка на это определение">¶</a></dt>
<dd><p>The size of the read-ahead buffer associated with a client connection. The
larger the buffer, the more memory an active connection consumes and the
more requests can be read from the operating system buffer in a single
system call. The rule of thumb is to make sure the buffer can contain at
least a few dozen requests. Therefore, if a typical tuple in a request is
large, e.g. a few kilobytes or even megabytes, the read-ahead buffer size
should be increased. If batched request processing is not used, it’s prudent
to leave this setting at its default.</p>
<p>Type: integer <br />
Default: 16320 <br />
Dynamic: <strong>yes</strong> <br /></p>
</dd></dl>

</div>
<div class="section" id="logging">
<h3><a class="toc-backref" href="#id14">5.4.7. Logging</a><a class="headerlink" href="#logging" title="Ссылка на этот заголовок">¶</a></h3>
<blockquote>
<div><a class="reference internal" href="#confval-log_level"><code class="xref std std-confval docutils literal"><span class="pre">log_level</span></code></a>, <br />
<a class="reference internal" href="#confval-logger"><code class="xref std std-confval docutils literal"><span class="pre">logger</span></code></a>, <br />
<a class="reference internal" href="#confval-logger_nonblock"><code class="xref std std-confval docutils literal"><span class="pre">logger_nonblock</span></code></a>, <br />
<a class="reference internal" href="#confval-too_long_threshold"><code class="xref std std-confval docutils literal"><span class="pre">too_long_threshold</span></code></a> <br /></div></blockquote>
<dl class="confval">
<dt id="confval-log_level">
<code class="descname">log_level</code><a class="headerlink" href="#confval-log_level" title="Ссылка на это определение">¶</a></dt>
<dd><p>How verbose the logging is. There are six log verbosity classes:</p>
<ul class="simple">
<li>1 – <code class="docutils literal"><span class="pre">SYSERROR</span></code></li>
<li>2 – <code class="docutils literal"><span class="pre">ERROR</span></code></li>
<li>3 – <code class="docutils literal"><span class="pre">CRITICAL</span></code></li>
<li>4 – <code class="docutils literal"><span class="pre">WARNING</span></code></li>
<li>5 – <code class="docutils literal"><span class="pre">INFO</span></code></li>
<li>6 – <code class="docutils literal"><span class="pre">DEBUG</span></code></li>
</ul>
<p>By setting log_level, one can enable logging of all classes below
or equal to the given level. Tarantool prints its logs to the standard
error stream by default, but this can be changed with the <a class="reference internal" href="#log-label"><span>logger</span></a>
configuration parameter.</p>
<p>Type: integer <br />
Default: 5 <br />
Dynamic: <strong>yes</strong> <br /></p>
</dd></dl>

<span class="target" id="log-label"></span><dl class="confval">
<dt id="confval-logger">
<code class="descname">logger</code><a class="headerlink" href="#confval-logger" title="Ссылка на это определение">¶</a></dt>
<dd><p>By default, the log is sent to the standard error stream (<code class="docutils literal"><span class="pre">stderr</span></code>). If
<code class="docutils literal"><span class="pre">logger</span></code> is specified, the log is sent to the file named in the string.
Example setting: <br />
box.cfg{logger = 'tarantool.log' } <br />
This will open <code class="file docutils literal"><span class="pre">tarantool.log</span></code> for output on the server’s default
directory. If <code class="docutils literal"><span class="pre">logger</span></code> string begins with a pipe, for example <br />
box.cfg{logger = '| cronolog tarantool.log' } <br />
the program specified in the option (in this case, cronolog) is executed at server start and all
log messages are sent to the standard input (<code class="docutils literal"><span class="pre">stdin</span></code>) of cronolog.</p>
<p>When logging to a file, tarantool reopens the log on SIGHUP. When log is
a program, its pid is saved in <a class="reference internal" href="../../reference/log.html#lua-function.log.logger_pid" title="log.logger_pid"><code class="xref lua lua-func docutils literal"><span class="pre">log.logger_pid()</span></code></a> variable. You need
to send it a signal to rotate logs.</p>
<p>Type: string <br />
Default: null <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-logger_nonblock">
<code class="descname">logger_nonblock</code><a class="headerlink" href="#confval-logger_nonblock" title="Ссылка на это определение">¶</a></dt>
<dd><p>If <code class="docutils literal"><span class="pre">logger_nonblock</span></code> equals true, Tarantool does not block on the log
file descriptor when it’s not ready for write, and drops the message
instead. If <a class="reference internal" href="#confval-log_level"><code class="xref std std-confval docutils literal"><span class="pre">log_level</span></code></a> is high, and a lot of messages go to the
log file, setting <code class="docutils literal"><span class="pre">logger_nonblock</span></code> to true may improve logging
performance at the cost of some log messages getting lost.</p>
<p>Type: boolean <br />
Default: true <br />
Dynamic: no <br /></p>
</dd></dl>

<dl class="confval">
<dt id="confval-too_long_threshold">
<code class="descname">too_long_threshold</code><a class="headerlink" href="#confval-too_long_threshold" title="Ссылка на это определение">¶</a></dt>
<dd><p>If processing a request takes longer than the given value (in seconds),
warn about it in the log. Has effect only if <a class="reference internal" href="#confval-log_level"><code class="xref std std-confval docutils literal"><span class="pre">log_level</span></code></a> is
more than or equal to 4 (WARNING).</p>
<p>Type: float <br />
Default: 0.5 <br />
Dynamic: <strong>yes</strong> <br /></p>
</dd></dl>

<p id="logging-example"><strong>Logging Example:</strong></p>
<p>This will illustrate how &quot;rotation&quot; works, that is, what happens when
the server is writing to a log and signals are used when archiving it.</p>
<p>Start with two terminal shells, Terminal #1 and Terminal#2.</p>
<p>On Terminal#1: start an interactive Tarantool session, then say the logging will
go to &quot;Log_file&quot;, then put a message &quot;Log Line #1&quot; in the log file:</p>
<div class="highlight-lua"><div class="highlight"><pre><span class="n">box</span><span class="p">.</span><span class="n">cfg</span><span class="p">{</span><span class="n">logger</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">Log_file&#39;</span><span class="p">}</span>
<span class="n">log</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">log&#39;</span><span class="p">)</span>
<span class="n">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">Log Line #1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>On Terminal#2: use <span class="ccode">mv</span> so the log file is now named &quot;Log_file.bak&quot;.
The result of this is: the next log message will go to Log_file.bak. <br /></p>
<div class="highlight highlight-python"><div class="highlight"><pre>mv Log_file Log_file.bak
</pre></div>
</div>
<p>On Terminal#1: put a message &quot;Log Line #2&quot; in the log file. <br /></p>
<div class="highlight-lua"><div class="highlight"><pre><span class="n">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">Log Line #2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>On Terminal#2: use <span class="ccode">ps</span> to find the process ID of the Tarantool server. <br /></p>
<div class="highlight highlight-python"><div class="highlight"><pre>ps -A | grep tarantool
</pre></div>
</div>
<p>On Terminal#2: use 'kill -HUP' to send a SIGHUP signal to the Tarantool server.
The result of this is: Tarantool will open Log_file again, and
the next log message will go to Log_file.
(The same effect could be accomplished by executing log.rotate() on the server.) <br /></p>
<pre class="highlight literal-block">
kill -HUP <em>process_id</em>
</pre>
<p>On Terminal#1: put a message &quot;Log Line #3&quot; in the log file.</p>
<div class="highlight-lua"><div class="highlight"><pre><span class="n">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">Log Line #3&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>On Terminal#2: use 'less' to examine files. Log_file.bak will have these lines,
except that the date and time will depend on when the example is done:</p>
<div class="highlight highlight-python"><div class="highlight"><pre>2015-11-30 15:13:06.373 [27469] main/101/interactive I&gt; Log Line #1`
2015-11-30 15:14:25.973 [27469] main/101/interactive I&gt; Log Line #2`
</pre></div>
</div>
<p>and Log_file will have</p>
<div class="highlight highlight-python"><div class="highlight"><pre>log file has been reopened
2015-11-30 15:15:32.629 [27469] main/101/interactive I&gt; Log Line #3
</pre></div>
</div>
</div>
</div>
<div class="section" id="book-cfg-local-hot-standy">
<span id="id3"></span><h2><a class="toc-backref" href="#id15">5.5. Local hot standby</a><a class="headerlink" href="#book-cfg-local-hot-standy" title="Ссылка на этот заголовок">¶</a></h2>
<p>Local hot standby is a feature which provides a simple form of failover without
replication. To initiate it, start a second instance of the Tarantool server on
the same computer with the same <a class="reference internal" href="../box/box_introspection.html#lua-module.box.cfg" title="box.cfg"><code class="xref lua lua-func docutils literal"><span class="pre">box.cfg()</span></code></a> configuration settings -
including the same directories and same non-null URIs. A warning should appear with a
message like</p>
<div class="highlight-none"><div class="highlight"><pre>W&gt; primary: [URI] is already in use, will retry binding after [n] seconds
</pre></div>
</div>
<p>This is fine. It means that the second instance is ready to take over if the
first instance goes down.</p>
<p>The expectation is that there will be two instances of the server using the
same configuration. The first one to start will be the &quot;primary&quot; instance.
The second one to start will be the &quot;standby&quot; instance. The standby instance
will initialize and will try to connect on listen address,
but will fail because the primary instance has already taken it. So the
standby instance goes into a loop, reading the write ahead log which the
primary instance is writing (so the two instances are always in synch),
and trying to connect on the port. If the primary instance goes down for any
reason, the port will become free so the standby instance will succeed in
connecting, and will become the primary instance. Thus there is no noticeable
downtime if the primary instance goes down.</p>
<p>If this local_hot_standby feature is being used, then wal_mode should
not be equal to &quot;none&quot;.</p>
</div>
</div>


        </article>


<div class="b-page_over-tail">

    
    <a href="../replication/index.html" class="b-prev">4. Replication</a>
    
    
    <a href="../administration.html" class="b-next">6. Server administration</a>
    
</div>


      </div>
    </div>
  </div>
  

      </div>
    </div>

    <!-- FOOTER > -->
    <footer class="b-footer">
      <div class="b-footer-wrapper">
        <nav class="b-footer_menu">
          
  <ul class="b-menu">
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org" class="b-menu-item-url">Overview</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://try.tarantool.org" class="b-menu-item-url">Try</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/doc/" class="b-menu-item-url p-active">Documentation</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/download.html" class="b-menu-item-url">Download</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://tarantool.org/careers.html" class="b-menu-item-url">Careers</a>
        
      </li>
    
      <li class="b-menu-item">
        
        <a href="http://rocks.tarantool.org" class="b-menu-item-url">Rocks</a>
        
      </li>
    
  </ul>

          <div class="b-footer-other">
            <a href="http://stable.tarantool.org">1.5 web site and downloads</a>
          </div>
        </nav>
      </div>
    </footer>
  <!-- < FOOTER -->
  </body>
</html>

